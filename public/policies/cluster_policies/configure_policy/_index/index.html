
<!doctype html>
<html lang="en-us">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1, user-scalable=yes">
  <title>Configuring Cluster Policies</title>
  <script src="//bower_components/webcomponentsjs/webcomponents-lite.js"></script>
  <link rel="import" href="//bower_components/iron-icons/iron-icons.html">
  <link rel="import" href="//bower_components/paper-drawer-panel/paper-drawer-panel.html">
  <link rel="import" href="//bower_components/paper-icon-button/paper-icon-button.html">
  <link rel="import" href="//bower_components/paper-toolbar/paper-toolbar.html">
  <link rel="import" href="//bower_components/paper-scroll-header-panel/paper-scroll-header-panel.html">
  <link rel="import" href="//bower_components/paper-fab/paper-fab.html">
  <link rel="import" href="//bower_components/paper-item/paper-item.html">
  <link rel="import" href="//bower_components/paper-menu/paper-menu.html">
  <link rel="import" href="//bower_components/iron-image/iron-image.html">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/styles/default.min.css">
  <style is="custom-style">
    body {
      font-family: 'Roboto', sans-serif;
    }
    .nav {
      border-right: 1px solid #ccc;
    }
    
    paper-scroll-header-panel {
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      background-color: var(--paper-grey-200, #eee);
       
      --paper-scroll-header-panel-full-header: {
        background-image: url(//images/cover.png);
      };
       
      --paper-scroll-header-panel-condensed-header: {
        background-image: url(//images/cover.png);
      };
    }
    
    paper-toolbar {
       
      height: 256px;
      background-color: transparent;
    }
    .profile{
      width: 100%;
      padding-bottom: 20px;
    }
    .photo{
      margin: 20px;
      display: inline-block;
      height: 64px; width: 64px;
      border-radius: 50%;
    }
    .article{
      border: 1px solid #bebebe;
      padding: 16px;
      margin: 16px;
      border-radius: 5px;
      background-color: #fff;
    }
    .title{
      font-size: 22px;
      padding: 8px 0 16px;
    }
    .description{
      font-size: 16px;
      padding-bottom: 8px;
    }
    .author{
      font-size: 16px;
      padding-left: 20px;
      color: white;
    }
    .design{
      font-size: 14px;
    }
    .copyright{
      font-size: 16px;
    }
    paper-menu a {
      text-decoration: none;
      color: #212121;
    }
  </style>

</head>
<body>
  <paper-drawer-panel id="drawerPanel" responsive-width="1280px">
    <div class="nav scroll" drawer>
    
      <iron-image class="profile" sizing="cover" src="//images/profile.png">
    
        
          <iron-image class="photo" sizing="cover" src="//images/photo.png"></iron-image>
        
          <div class="author">Your Name</div>
      </iron-image>
      <paper-menu>
        <a href="/"><paper-item>
          <iron-icon icon="home"></iron-icon>　<div class="flex">Home</div>
          <iron-icon icon="chevron-right"></iron-icon>
        </paper-item></a>
        <a href="//categories/"><paper-item>
          <iron-icon icon="drafts"></iron-icon>　<div class="flex">Categories</div>
          <iron-icon icon="chevron-right"></iron-icon>
        </paper-item></a>
        <a href="//tags/"><paper-item>
          <iron-icon icon="loyalty"></iron-icon>　<div class="flex">Tags</div>
          <iron-icon icon="chevron-right"></iron-icon>
        </paper-item></a>
      </paper-menu>
    </div>

    <paper-scroll-header-panel main condenses header-height="256" condensed-header-height="64">

      <paper-toolbar>

        <paper-icon-button icon="menu" paper-drawer-toggle></paper-icon-button>
        <div class="bottom title">Your Site Title</div>
        <div class="flex"></div>
        
          <a href="https://www.facebook.com/Your%20facebook%20Name"><paper-icon-button src="//images/facebook-dreamstale25.png"></paper-icon-button></a>
        
        
          <a href="https://twitter.com/Your%20Twitter%20Name"><paper-icon-button src="//images/twitter-dreamstale71.png"></paper-icon-button></a>
        
        
          <a href="https://google.com/+Your%20Google&#43;%20Name"><paper-icon-button src="//images/google+-dreamstale37.png"></paper-icon-button></a>
        
        
          <a href="https://www.linkedin.com/in/Your%20linkedin%20Name"><paper-icon-button src="//images/linkedin-dreamstale45.png"></paper-icon-button></a>
        
        
          <a href="https://github.com/Your%20Github%20Name"><paper-icon-button src="//images/github2-dreamstale35.png"></paper-icon-button></a>
        
          <a href="//index.xml"><paper-icon-button src="//images/feed-dreamstale27.png"></paper-icon-button></a>
      
      </paper-toolbar>



<div class="content">

  <div class="article">
    <div class="title">Configuring Cluster Policies</div>
     
    <div class="description">

<p>To update an existing cluster policy:</p>

<ol>
<li>Select Cluster Polices from the Policies menu.</li>

<li><p>Find and click the name of the policy you wish to edit in the Cluster Policies list.</p>

<p><img src="/images/select_cluster_policy.png" style="max-width:50%; height: auto;"></p></li>
</ol>

<p>After configuring the policy, you can use it when deploying a Kubernetes cluster.</p>

<h2 id="policy-details-page:3976528693a0108357f4928017600865">Policy Details Page</h2>

<p>Configure the policy from the Policy Details page.</p>

<p><img src="/images/cluster_policy_details_page.png" style="max-width:80%; height: auto;"></p>

<p>The Policy Details page contains the following sections:</p>

<ul>
<li><a href="#summary">Summary</a></li>
<li><a href="#add-ons">Add-ons</a></li>
<li><a href="#components">Components</a></li>
<li><a href="#controller-settings">Controller Settings</a></li>
<li><a href="#ingress-controller">Ingress Controller</a></li>
<li><a href="#network-plugins">Network Plugins</a></li>
<li><a href="#proxy-settings">Proxy Settings</a></li>
<li><a href="#storage">Storage</a></li>
</ul>

<h3 id="summary:3976528693a0108357f4928017600865">Summary</h3>

<p>The Summary section enables users to change the Version, Cloud Provider, and Master Node Scheduling Flag for a policy.</p>

<p><img src="/images/cluster_policy_summary.png" style="max-width:50%; height: auto;"></p>

<p>Edit the Summary settings by clicking the Edit icon in the upper right corner of the Summary section.</p>

<p><img src="/images/edit_cluster_policy_overlay.png" style="max-width:50%; height: auto;"></p>

<p>From the Edit Policy Details overlay, users can:</p>

<ol>
<li>Change the policy Name.</li>
<li>Enter a policy Description.</li>
<li>Choose a different service Version from the drop-down list.</li>
<li>Choose a different Cloud provider from the drop-down list.</li>
<li>Check the box for the Disable Schedule On Master Nodes setting. Checking the box enables this setting.</li>
<li>Click the Save button to save your changes or click the Cancel button to return to the Policy Details page.</li>
</ol>

<p><strong>Note:</strong> users should check the Disable Schedule On Master Nodes box to enable this setting for their cluster policies. Users should turn on Disable Schedule to avoid having the control-plane and applications running on the same nodes.</p>

<h3 id="add-ons:3976528693a0108357f4928017600865">Add-ons</h3>

<p>The Add-ons section lists all Cluster Add-ons selected when creating the cluster policy.</p>

<p><img src="/images/cluster_policy_add_ons.png" style="max-width:50%; height: auto;"></p>

<p>The DNS add-on is a default add-on for new cluster policies. You can choose a different add-on if you like.</p>

<p>Some available add-ons include:</p>

<ul>
<li>Prometheus monitoring</li>
<li>Vault authentication agent</li>
<li>Velero backup and restore</li>
</ul>

<h4 id="adding-more-add-ons:3976528693a0108357f4928017600865">Adding More Add-ons</h4>

<p>To add more add-ons to a cluster policy:</p>

<ol>
<li><p>Click the + in the upper right corner of the Add-ons section.</p>

<p><img src="/images/cluster_policy_add_on_add.png" style="max-width:50%; height: auto;"></p>

<p>The Add Add-on overlay appears.</p>

<p><img src="/images/cluster_add_add_on_overlay.png" style="max-width:50%; height: auto;"></p></li>

<li><p>Choose an add-on from the Select Add-on drop-down list. Available options are Prometheus monitoring and the Vault authentication agent.</p>

<p><img src="/images/cluster_select_add_on.png" style="max-width:50%; height: auto;"></p></li>

<li><p>Enter a Name to identify the add-on instance. The default is the name of the selected add-on.</p></li>

<li><p>Click the Add button add the add-on instance or click Cancel to return to the Police Details page.</p></li>
</ol>

<h4 id="removing-add-ons:3976528693a0108357f4928017600865">Removing Add-ons</h4>

<p>To remove add-ons:</p>

<ol>
<li><p>Click the red X to the right of the add-on name.</p>

<p><img src="/images/cluster_remove_add_on.png" style="max-width:50%; height: auto;"></p>

<p>A confirmation overlay appears.</p>

<p><img src="/images/policy_confirm_add_on_delete.png" style="max-width:50%; height: auto;"></p></li>

<li><p>Click the Delete button to delete the add-on from the cluster policy. Click the Cancel button to return to the Policy Details page.</p></li>
</ol>

<h3 id="components:3976528693a0108357f4928017600865">Components</h3>

<p>The Components section displays all default <a href="/introduction/core_concepts/application_components/">Application Components</a> configured for a cluster policy. You may add, edit, or delete arguments for cluster components.</p>

<p><img src="/images/cluster_components.png" style="max-width:80%; height: auto;"></p>

<p>Each application component displayed includes the Name, Image, and Arguments for the component. You may edit a Component Specification to add, edit, or delete its Arguments.</p>

<h4 id="adding-a-component-specification-argument:3976528693a0108357f4928017600865">Adding a Component Specification Argument</h4>

<ol>
<li><p>To add a component specification argument, click the Edit icon on the right side of the Component section. Be sure to click the icon next to the component you wish to change.</p>

<p><img src="/images/cluster_add_component_spec_arg.png" style="max-width:80%; height: auto;"></p>

<p>The Edit Component Spec overlay appears. There are two sections in this overlay: Image and Args.</p>

<p>The Image field specifies the component image used. Args is the list of key-value pairs (arguments) used by the component.</p></li>

<li><p>Click + Add Item at the bottom of the Args table.</p></li>

<li><p>Enter the Key name.</p></li>

<li><p>Select a Type from the drop-down list. Options are String, Number, and Object.</p>

<p><img src="/images/cluster_component_spec_type.png" style="max-width:80%; height: auto;"></p></li>

<li><p>Enter the value for the new key-value pair.</p></li>

<li><p>Click the Save button to save the new key-value pair or click Cancel to return to the Policy Details page.</p></li>
</ol>

<h4 id="editing-component-specification-arguments:3976528693a0108357f4928017600865">Editing Component Specification Arguments</h4>

<p>To edit a component specification argument, click the Edit icon on the right side of the Component section. Be sure to click the icon next to the component you wish to change.</p>

<ol>
<li><p>Click inside the field containing the value you wish to modify.</p>

<p><img src="/images/cluster_edit_component_spec.png" style="max-width:80%; height: auto;"></p></li>

<li><p>Enter the new value for the key.</p></li>

<li><p>Click the Save button to save your changes, or click Cancel to return to the Policy Details page without saving your changes.</p></li>
</ol>

<h4 id="deleting-component-specification-arguments:3976528693a0108357f4928017600865">Deleting Component Specification Arguments</h4>

<p>To delete a component specification argument, click the Edit icon on the right side of the Component section. Be sure to click the icon next to the component you wish to change.</p>

<ol>
<li>Click the X on the right side of the argument you wish to delete.</li>
<li>Click the Save button to save your changes, or click Cancel to return to the Policy Details page without saving.</li>
</ol>

<p><img src="/images/cluster_delete_component_spec.png" style="max-width:80%; height: auto;"></p>

<h3 id="controller-settings:3976528693a0108357f4928017600865">Controller Settings</h3>

<p>The Controller Settings Panel allows you to enable or disable these cluster policy settings:</p>

<ul>
<li>Is Insecure</li>
<li>Use HTTP Proxy</li>
</ul>

<p><img src="/images/cluster_controller_settings.png" style="max-width:50%; height: auto;"></p>

<h4 id="editing-controller-settings:3976528693a0108357f4928017600865">Editing Controller Settings</h4>

<ol>
<li><p>To change Controller Settings, click the Edit icon on the right side of the Controller Settings section.</p>

<p>The Edit Controller Spec overlay appears.</p>

<p><img src="/images/controller_edit_settings.png" style="max-width:50%; height: auto;"></p></li>

<li><p>To enable insecure HTTP connections, check the box next to Is Insecure.</p></li>

<li><p>To use an HTTP proxy, check the box next to Use Http Proxy.</p></li>

<li><p>Click the Save button, or click Cancel to return to the Policy Details page without saving.</p></li>
</ol>

<p>To disable either or both controller settings, uncheck the box and save the updated settings.</p>

<p><strong>Note:</strong> you must enable the Is Insecure setting if you are using a self-signed SSL certificate for your application.</p>

<h3 id="network:3976528693a0108357f4928017600865">Network</h3>

<p>The Network panel allows you to manage ingress controllers and network plugins for the cluster. From the Policy Details page, you may view, download, and add ingress controller specifications for a cluster policy. The default Nirmata ingress controller is for HAProxy.</p>

<p><strong>Note:</strong> you may only have one Ingress controller spec at a time for a Cluster Policy. Uploading a new one replaces the existing default spec.</p>

<p><img src="/images/cluster_policy_network_panel.png" style="max-width: 50%; height: auto;"></p>

<h4 id="viewing-or-downloading-an-existing-ingress-controller-specification:3976528693a0108357f4928017600865">Viewing or Downloading an Existing Ingress Controller Specification</h4>

<ol>
<li><p>To view or download an existing ingress controller specification, click on the name of the specification in the Name column of the Ingress Controller section of the Network panel.</p>

<p>The YAML file viewer for the selected Ingress controller appears.</p>

<p><img src="/images/download_ingress_controller_yaml.png" style="max-width: 80%; height: auto;"></p></li>

<li><p>Scroll to view the entire file.</p></li>

<li><p>Click the Download button to download a zip file containing the YAML controller specification.</p></li>

<li><p>Click the Cancel button to close the overlay and return to the Policy Details page.</p></li>
</ol>

<p>You may use the downloaded YAML controller specification file as a template for creating a new one.</p>

<h4 id="adding-ingress-controller-specifications:3976528693a0108357f4928017600865">Adding Ingress Controller Specifications</h4>

<ol>
<li>First, create a YAML controller specification file with the desired settings.</li>
<li>Click the + button on the right in the Ingress Controller section of the Network panel.</li>
</ol>

<p>The Add Ingress Controller Spec appears.</p>

<p><img src="/images/add_ingress_controller_spec.png" style="max-width: 50%; height: auto;"></p>

<ol>
<li>Enter a Name for the new ingress controller spec.</li>
<li>Upload your YAML controller specification file. Click inside the dotted line field to select and upload your file, or drag the file inside the dotted line field.</li>
<li>Click the Add button to add the ingress controller spec, or click Cancel to return to the Policy Details page.</li>
</ol>

<p><strong>Note:</strong> you may only have one ingress controller spec at a time for a Cluster Policy. Uploading a new one replaces the existing default spec.</p>

<h4 id="deleting-ingress-controller-specifications:3976528693a0108357f4928017600865">Deleting Ingress Controller Specifications</h4>

<ol>
<li>Click the red X to the right of the Ingress controller specification.</li>
</ol>

<p><img src="/images/cluster_delete_ingress_controller.png" style="max-width: 50%; height: auto;"></p>

<h3 id="network-plugins:3976528693a0108357f4928017600865">Network Plugins</h3>

<p>Nirmata packages Flannel by default, and uses the CNIs provided by cloud providers for Kubernetes networking. Customers wishing to use a different CNI  can add the plugin YAML using the Network panel.</p>

<h4 id="adding-network-plugins:3976528693a0108357f4928017600865">Adding Network Plugins</h4>

<ol>
<li>To add a network plugin, you must first get a plugin YAML file.</li>

<li><p>Click Add Network (CNI) Plugin in the Network panel.</p>

<p><img src="/images/cluster_add_network_plugin.png" style="max-width: 50%; height: auto;"></p>

<p>The Add a Network (CNI) Plugin overlay appears.</p>

<p><img src="/images/cluster_add_network_plugin_overlay.png" style="max-width: 50%; height: auto;"></p></li>

<li><p>Enter a Name for the network plugin.</p></li>

<li><p>Upload your plugin YAML file. Click inside the dotted line field to select and upload your file, or drag the file inside the dotted line field.</p></li>

<li><p>Click the Add button to add the new network plugin spec or click Cancel to return to the Policy Details page.</p></li>
</ol>

<h3 id="proxy-settings:3976528693a0108357f4928017600865">Proxy Settings</h3>

<p>Proxy settings allow you to specify the IP addresses Kubernetes uses for proxies for your cluster policy.</p>

<p><img src="/images/cluster_proxy_settings.png" style="max-width: 50%; height: auto;"></p>

<h4 id="adding-proxy-settings:3976528693a0108357f4928017600865">Adding Proxy Settings</h4>

<ol>
<li><p>To add proxy settings, click the edit icon on the upper right of the Proxy Settings section of Policy Details.</p>

<p>The Edit Proxy Settings Spec overlay appears.</p>

<p><img src="/images/cluster_edit_proxy_settings.png" style="max-width: 50%; height: auto;"></p></li>

<li><p>Enter the IP address for an HTTP proxy in the HTTP Proxy field.</p></li>

<li><p>Enter the IP address for an HTTPS proxy in the HTTPS Proxy field.</p></li>

<li><p>Enter the IP address used when there is no proxy.</p></li>

<li><p>Click the Save button to save your changes or click Cancel to return to the Policy Details page.</p></li>
</ol>

<h4 id="editing-proxy-settings:3976528693a0108357f4928017600865">Editing Proxy Settings</h4>

<ol>
<li>To edit proxy settings, click the edit icon on the upper right of the Proxy Settings section of Policy Details.</li>
<li>Change the IP address values.</li>
<li>Click the Save button to save your changes or click Cancel to return to the Policy Details page.</li>
</ol>

<h4 id="deleting-proxy-settings:3976528693a0108357f4928017600865">Deleting Proxy Settings</h4>

<ol>
<li>To delete proxy settings, click the edit icon on the upper right of the Proxy Settings section of Policy Details.</li>
<li>Delete the IP address values.</li>
<li>Click the Save button to save your changes or click Cancel to return to the Policy Details Page.</li>
</ol>

<h3 id="storage:3976528693a0108357f4928017600865">Storage</h3>

<p>You can add, view, download, or delete storage class plugins from your cluster policy. By default, Nirmata picks a storage class based on infrastructure type. For public clouds, it uses default block storage class available for respective public clouds.</p>

<p><img src="/images/cluster_storage_class.png" style="max-width: 50%; height: auto;"></p>

<h4 id="viewing-and-downloading-storage-class-plugin:3976528693a0108357f4928017600865">Viewing and Downloading Storage Class Plugin</h4>

<ol>
<li><p>To view and download the storage plugin YAML file click on the name of the storage class in the Name column of the Storage panel.</p>

<p>The YAML file viewer for the selected storage class appears.</p>

<p><img src="/images/cluster_storage_class_yaml.png" style="max-width: 80%; height: auto;"></p></li>

<li><p>Click the Download button to download a zipped copy of the YAML file or click Cancel to return to Policy Details.</p></li>
</ol>

<p>You may use the downloaded YAML storage class plugin file as a template for creating a new plugin YAML file.</p>

<h4 id="adding-a-storage-class-plugin:3976528693a0108357f4928017600865">Adding a Storage Class Plugin</h4>

<ol>
<li>To add a storage class plugin, you must supply a plugin YAML file.</li>

<li><p>Click Add Storage (CSI) Plugin in the Storage panel.</p>

<p><img src="/images/cluster_storage_class_add_plugin.png" style="max-width: 50%; height: auto;"></p>

<p>The Add Storage Class Spec overlay appears.</p>

<p><img src="/images/cluster_add_storage_class_spec_overlay.png" style="max-width: 50%; height: auto;"></p></li>

<li><p>Enter a Name for the storage plugin spec.</p></li>

<li><p>Upload your plugin YAML file. Click inside the dotted line field to select and upload your file, or drag the file inside the dotted line field.</p></li>

<li><p>Click the Add button to add the new storage class plugin spec or click Cancel to return to Policy Details.</p></li>
</ol>

<p>The newly added storage class plugin appears in the Storage Plugins section of the Storage panel.</p>

<p><img src="/images/cluster_storage_plugin.png" style="max-width: 50%; height: auto;"></p>

<h4 id="deleting-a-storage-class-plugin:3976528693a0108357f4928017600865">Deleting a Storage Class Plugin</h4>

<ol>
<li><p>Click the red X to the right of the storage class plugin spec you wish to remove.</p>

<p><img src="/images/cluster_delete_storage_class_plugin.png" style="max-width: 50%; height: auto;"></p>

<p>A confirmation Overlay appears.</p>

<p><img src="/images/cluster_delete_storage_plugin_confirm.png" style="max-width: 50%; height: auto;"></p></li>

<li><p>Click the Delete button to delete the storage class plugin spec, or click Cancel to return to Policy Details.</p></li>
</ol>
</div>
    <div class="tags">
      1 Jan 0001
       
    </div>
    
      <div id="disqus_thread"></div>
<script type="text/javascript">
     
    var disqus_shortname = 'Your Disqus Name';
    
     
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
    
  </div>

</div>

<paper-item>
  
    <a href="/privateedition/disasterrecovery/commonfailurescenarios/_index/"><paper-fab icon="chevron-left"><a></a></paper-fab></a>
  
    <div class="flex"></div>
  
    <a href="/hostgroups/openstack_host_groups/create_openstack_host_group/_index/"><paper-fab icon="chevron-right"></paper-fab></a>
  
</paper-item>

      <paper-item>
        <div class="copyright">© 2015 Copyright Text</div>
        <div class="flex"></div>
        <div class="design">Design <a href="http://pdevty.github.io/blog/">pdevty</a></div>
      </paper-item>
    </paper-scroll-header-panel>
  </paper-drawer-panel>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'Your Analytics User Id', 'auto');
    ga('send', 'pageview');
  </script>
  
</body>
</html>
